

### Вариант 4:

|          Дуги          | sa | sb | sc | ba | bc | cd | ac | ad | dt |
|:----------------------:|:--:|:--:|----|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность | 7  | 7  | 7  | 6  | 5  | 11 | 6  | 9  | 12 |
| Стоимость транспортировки | 2  | 2  | 4  | 2  | 2  | 2  | 4  | 5  | 2  |

### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

```mermaid
graph LR
    s-->|7|a
    s-->|7|b
    s-->|7|c
    b-->|6|a
    b-->|5|c
    c-->|11|d
    a-->|6|c
    a-->|9|d
    d-->|12|t


```

Укажем начальный поток величиной 7 s -> с -> d -> t. Построим соответствующую остаточную сеть. 

```mermaid
graph RL
    t-.->|5|d-.->|4|c-.->|5|b-.->|7|s
    c-.->|6|a-.->|6|b
    d-.->|9|a
    a-.->|7|s
    s-->|7|c-->|7|d-->|7|t

```

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> с -> b -> s. Минимальный вес дуг на этом пути равен 4.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph RL
    t-.->|1|d
    c-.->|6|a-.->|6|b
    d-.->|9|a
    a-.->|7|s
    b-.->|3|s
    b-->|4|c
    s-->|4|b
    c-.->|1|b
    s-->|7|c-->|11|d-->|11|t

```

### 3. Продолжим поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> a -> b -> s. Минимальный вес дуг на этом пути равен 1.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.
```mermaid
graph RL
    c-.->|6|a-.->|5|b
    a-->|1|d
    d-.->|8|a
    a-.->|7|s
    b-->|1|a
    b-.->|2|s
    b-->|4|c
    s-->|5|b
    s-->|7|c-->|11|d-->|12|t

```
### 4. Продолжим поиск увеличивающего пути в остаточной сети
#### В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 12 является максимальным для данной сети.

```mermaid
graph LR
    s-->|7,0|a
    s-->|7,5|b
    s-->|7,7|c
    b-->|6,1|a
    b-->|4,4|c
    c-->|11,11|d
    a-->|4,0|c
    a-->|9,1|d
    d-->|12,12|t


```


### 4. Рассчитаем стоимость полученного максимального потока.

Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

|           Дуги            | sa | sb | sc | ba | bc | cd | ac | ad | dt | Итог |
|:-------------------------:|:--:|:--:|----|:--:|:--:|:--:|:--:|:--:|:--:|:----:|
|  Пропускная способность   | 7  | 7  | 7  | 6  | 4  | 11 | 4  | 9  | 12 | 
|      Локальный поток      | 0  | 5  | 7  | 1  | 4  | 11 | 0  | 1  | 12 |
| Стоимость транспортировки | 2  | 2  | 4  | 2  | 2  | 2  | 4  | 5  | 2  |
|    Суммарная стоимость    | 0  | 10 | 28 | 2  | 8  | 22 | 0  | 5  | 24 |  99  |

#### Стоимость полученного потока составляет 99

### 5. Пробуем уменьшить стоимость потока, для чего строим остаточную сеть
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

```mermaid
graph RL
    c-.->|4|a-.->|2|b
    d-.->|5|a
    a-->|-5|d
    a-.->|2|s
    b-->|-2|a
    b-->|-2|c
    s-->|-2|b
    b-.->|2|s
    s-->|-4|c-->|-2|d-->|-2|t

```

#### В остаточной сети найден ориентированный цикл отрицательной стоимости s -> b -> a -> s (-2 -2 +2 = -2).

#### Найдем минимальный вес ребра в указанном цикле, изображенном в остаточной сети с указанием величины потока.

```mermaid
graph RL
    c-.->|6|a-.->|5|b
    a-->|1|d
    d-.->|8|a
    a-.->|7|s
    b-->|1|a
    b-.->|2|s
    b-->|4|c
    s-->|5|b
    s-->|7|c-->|11|d-->|12|t

```
#### Минимальный вес ребра в цикле 1.
#### Удалим найденный цикл - уменьшим на 1 вес всех ребер, входящих в цикл.

```mermaid
graph RL
    c-.->|6|a-.->|6|b
    a-->|1|d
    d-.->|8|a
    a-.->|6|s
    b-.->|3|s
    b-->|4|c
    s-->|4|b
    s-->|1|a
    s-->|7|c-->|11|d-->|12|t

```

### Повторяем 5 шаг. Пробуем уменьшить стоимость потока, для чего строим остаточную сеть.

#### Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

```mermaid
graph RL
    c-.->|4|a-.->|2|b
    d-.->|5|a
    a-->|-5|d
    a-.->|2|s
    b-->|-2|c
    s-->|-2|b
    s-->|-2|a
    b-.->|2|s
    s-->|-4|c-->|-2|d-->|-2|t

```

#### В остаточной сети не найден ориентированный цикл с отрицательной стоимостью.


```mermaid
graph RL
    c-.->|6|a-.->|6|b
    a-->|1|d
    d-.->|8|a
    a-.->|6|s
    b-.->|3|s
    b-->|4|c
    s-->|4|b
    s-->|1|a
    s-->|7|c-->|11|d-->|12|t

```

```mermaid
graph LR
    s-->|7,1|a
    s-->|7,4|b
    s-->|7,7|c
    b-->|6,0|a
    b-->|4,4|c
    c-->|11,11|d
    a-->|6,0|c
    a-->|9,1|d
    d-->|12,12|t


```

|           Дуги            | sa | sb | sc | ba | bc | cd | ac | ad | dt | Итог |
|:-------------------------:|:--:|:--:|----|:--:|:--:|:--:|:--:|:--:|:--:|:----:|
|  Пропускная способность   | 7  | 7  | 7  | 6  | 4  | 11 | 6  | 9  | 12 | 
|      Локальный поток      | 1  | 4  | 7  | 0  | 4  | 11 | 0  | 1  | 12 |
| Стоимость транспортировки | 2  | 2  | 4  | 2  | 2  | 2  | 4  | 5  | 2  |
|    Суммарная стоимость    | 2  | 8  | 28 | 0  | 8  | 22 | 0  | 5  | 24 |  97  |


### Ответ:
Стоимость максимального потока с минимальной стоимостью составляет 97.
