## Задание №19

## Задача о рюкзаке (Knapsack problem)

## Постановка задачи

Задача о рюкзаке (англ. Knapsack problem) — дано N предметов, n<sub>i</sub> предмет имеет массу w<sub>i</sub> > 0 и стоимость p<sub>i</sub> > 0. Необходимо выбрать из этих предметов такой набор, чтобы суммарная масса не превосходила заданной величины W (вместимость рюкзака), а суммарная стоимость была максимальна.

## Условия задачи

### Вариант 4:

| Предметы  |  A  |  B  |  C  |  D  |  E  |  F  |
| :-------- | :-: | :-: | :-: | :-: | :-: | :-: |
| Стоимость |  5  |  5  |  3  |  8  |  6  |  8  |
| Вес       |  5  | 10  | 12  |  2  |  2  |  4  |

Ограничение вместимости: 22

## Решение

### 1. Рассчитаем ценность каждого предмета

| Предметы  |  A  |  B  |  C  |  D  |  E  |  F  |
| :-------- | :-: | :-: | :-: | :-: | :-: | :-: |
| Стоимость |  5  |  5  |  3  |  8  |  6  |  8  |
| Вес       |  5  | 10  | 12  |  2  |  2  |  4  |
| Ценность  |  1  | 1/2 | 1/4 |  4  |  3  |  2  |

### 2. Отсортируем предметы по убыванию ценности

| Предметы  |  D  |  E  |  F  |  A  |  B  |  C  |
| :-------- | :-: | :-: | :-: | :-: | :-: | :-: |
| Стоимость |  8  |  6  |  8  |  5  |  5  |  3  |
| Вес       |  2  |  2  |  4  |  5  | 10  | 12  |
| Ценность  |  4  |  3  |  2  |  1  | 1/2 | 1/4 |

### 3. Рассчитаем оценку сверху для пустого рюкзака

Свободное место в рюкзаке: 22

Наибольшая ценность предмета: 4

Оценка сверху для пустого рюкзака: 22 \* 4 = 88

### 4. Найдем решение задачи с использованием метода ветвей и границ

```mermaid
graph TB
	id1["#1<br>22*4=88"]
    id2["#2<br>22*3=66"]
    id3["#3<br>8+20*3=68"]
    id4["#4<br>8+22*2=48"]
    id5["#5<br>8+6+18*2=50"]
    id6["#6<br>22*2=44"]
    id7["#7<br>6+20*2=46"]
    id8["#8<br>8+6+18*1=32"]
    id9["#9<br>8+6+8+14*1=36"]
    id10["#10<br>8+20*1=28"]
    id11["#11<br>8+8+16*1=32"]
    id12["#12<br>6+20*1=26"]
    id13["#13<br>6+8+16*1=30"]
    id14["#14<br>22*1=22"]
    id15["#15<br>8+18*1=26"]
    id16["#16<br>8+6+8+14*0.5=29"]
    id17["#17<br>8+6+8+5+9*0.5=31.5"]
    id18["#18<br>8+6+18*0.5=23"]
    id19["#19<br>8+6+5+13*0.5=25.5"]
    id20["#20<br>8+8+16*0.5=24"]
    id21["#21<br>8+8+5+11*0.5=26.5"]
    id22["#22<br>8+6+8+5+9*0.25=29.25"]
    id23["#23<br>0"]
    id24["#24<br>6+8+16*0.5=22"]
    id25["#25<br>6+8+5+11*0.5=24.5"]
    id26["#26<br>8+6+8+5=27"]
    id27["#27<br>0"]
    id28["#28<br>8+6+8+14*0.25=25.5"]
    id29["#29<br>8+6+8+5+4*0.25=28"]
    id30["#30<br>8+6+8+5=27"]
    id31["#30<br>0"]
	id1 -->|"+D"| id3
	id1 -->|"-D"| id2
	id3 -->|"+E"| id5
	id3 -->|"-E"| id4
    id2 -->|"+E"| id7
	id2 -->|"-E"| id6
	id5 -->|"-F"| id8
	id5 -->|"+F"| id9
	id4 -->|"+F"| id11
	id4 -->|"-F"| id10
	id7 -->|"+F"| id13
    id7 -->|"-F"| id12
    id6 -->|"+F"| id15
    id6 -->|"-F"| id14
    id9 -->|"+A"| id17
    id9 -->|"-A"| id16
    id8 -->|"+A"| id19
    id8 -->|"-A"| id18
    id11 -->|"+A"| id21
    id11 -->|"-A"| id20
    id17 -->|"+B"| id23
    id17 -->|"-B"| id22
    id13 -->|"+A"| id25
    id13 -->|"-A"| id24
    id22 -->|"+C"| id27
    id22 -->|"-C"| id26
    id16 -->|"+B"| id29
    id16 -->|"-B"| id28
    id29 -->|"+C"| id31
    id29 -->|"-C"| id30
```

### Ответ
- Наибольшая стоимость предметов в рюкзаке 27.
- Набор предметов, обеспечивающих максимальную стоимость: DEFA. DEFB.
- Свободное место в рюкзаке DEFA: 9, DEFB: 4.
