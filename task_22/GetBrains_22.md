# Вариант 2

## Задача 1

### Условия задачи:
Максимальная вместимость рюкзака: 100 кг

### Предметы:
1. Предмет 1: вес 10 кг, стоимость 60
2. Предмет 2: вес 20 кг, стоимость 100
3. Предмет 3: вес 30 кг, стоимость 120
4. Предмет 4: вес 40 кг, стоимость 240
5. Предмет 5: вес 15 кг, стоимость 90
6. Предмет 6: вес 25 кг, стоимость 150
7. Предмет 7: вес 35 кг, стоимость 210

| Особь | Предмет 1 | Предмет 2 | Предмет 3 | Предмет 4 | Предмет 5 | Предмет 6 | Предмет 7 |
|:-----:|-----------|-----------|-----------|-----------|-----------|-----------|-----------|
| 1     | 1         | 0         | 1         | 0         | 1         | 0         | 0         |
| 2     | 0         | 1         | 0         | 1         | 0         | 1         | 0         |
| 3     | 1         | 1         | 0         | 0         | 0         | 1         | 1         |
| 4     | 0         | 0         | 1         | 1         | 1         | 0         | 1         |
| 5     | 1         | 1         | 1         | 0         | 0         | 0         | 1         |
| 6     | 0         | 0         | 1         | 1         | 0         | 1         | 0         |

В нашем случае 2 особи не подходят по условию о весе (не больше 100кг)

| Особь | Вес    | Стоимость |
|:-----:|--------|-----------|
| 1     | 55 кг  | 270       |
| 2     | 85 кг  | 490       |
| 3     | 120 кг | 640       |
| 4     | 130 кг | 660       |
| 5     | 95 кг  | 620       |
| 6     | 95 кг  | 610       |

**Замечание**: Особи 3 и 4 превышают максимальный вес 100 кг и должны быть перегенерированы.

## Перегенерация недопустимых особей

### Обновленная популяция

| Особь | Предмет 1 | Предмет 2 | Предмет 3 | Предмет 4 | Предмет 5 | Предмет 6 | Предмет 7 |
|:-----:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|
| 1     | 1         | 0         | 1         | 0         | 1         | 0         | 0         |
| 2     | 0         | 1         | 0         | 1         | 0         | 1         | 0         |
| 3     | 1         | 0         | 1         | 1         | 0         | 0         | 0         |
| 4     | 0         | 1         | 1         | 0         | 1         | 0         | 1         |
| 5     | 1         | 1         | 1         | 0         | 0         | 0         | 1         |
| 6     | 0         | 0         | 1         | 1         | 0         | 1         | 0         |

### Обновленный вес и стоимость особей

| Особь | Вес    | Стоимость |
|:-----:|:------:|:---------:|
| 1     | 55 кг  | 270       |
| 2     | 85 кг  | 490       |
| 3     | 80 кг  | 420       |
| 4     | 85 кг  | 460       |
| 5     | 95 кг  | 620       |
| 6     | 95 кг  | 610       |

Для отбора для скрещивания берутся 2 сильнейших (по условию 1/3 от общего кол-ва) подходящих особи - 5 и 6

| Особь | Вес    | Стоимость |
|:-----:|--------|-----------|
| 5     | 95 кг  | 620       |
| 6     | 95 кг  | 610       |

Делаем двухточечное скрещивание. Выбираем точки скрещивания, например, между позициями 4 и 7

|    Особь   | Предмет 1 | Предмет 2 | Предмет 3 | Предмет 4 | Предмет 5 | Предмет 6 | Предмет 7 |
|:----------:|-----------|-----------|-----------|-----------|-----------|-----------|-----------|
| Родитель 1 | 1         | 1         | 1         | 0         | 0         | 0         | 1         |
| Родитель 2 | 0         | 0         | 1         | 1         | 0         | 1         | 0         |
| Потомок 1  | 1         | 1         | 1         | 1         | 0         | 0         | 0         |
| Потомок 2  | 0         | 0         | 1         | 0         | 0         | 1         | 1         |

### Веса и стомости после скрещивания

| Особь | Вес    | Стоимость |
|:-----:|--------|-----------|
| 7     | 100 кг | 640       |
| 8     | 90 кг  | 580       |



### Алгоритм мутации

#### Входные данные

- `особь`
- `максимальный_вес`
- `предметы`

#### Шаги алгоритма

1. Случайным образом выбрать позицию `i` в особи.
2. Если `особь[i] == 1`, то:
    1. Заменить `особь[i]` на `0` (убрать).
    2. Вычислить новый вес особи.
    3. Если новый вес не превышает `максимальный_вес`, то:
        - Принять изменение.
    4. Иначе:
        - Отменить изменение.
3. Иначе, если `особь[i] == 0`, то:
    1. Заменить `особь[i]` на `1` (добавить).
    2. Вычислить новый вес особи.
    3. Если новый вес не превышает `максимальный_вес`, то:
        - Принять изменение.
    4. Иначе:
        - Отменить изменение.


В случае с 7-й особью берём i = 1, тогда, согласно алгоритму (убираем предмет), получаем 9-ю особь - 0111000

В случае с 8-й особью берём i = 1, тогда, согласно алгоритму (добавляем предмет), получаем 10-ю особь - 1010011

|    Особь   | Предмет 1 | Предмет 2 | Предмет 3 | Предмет 4 | Предмет 5 | Предмет 6 | Предмет 7 |
|:----------:|-----------|-----------|-----------|-----------|-----------|-----------|-----------|
| 9          | 0         | 1         | 1         | 1         | 0         | 0         | 0         |
| 10         | 1         | 0         | 1         | 0         | 0         | 1         | 1         |

### Веса и стомости после скрещивания

| Особь | Вес    | Стоимость |
|:-----:|--------|-----------|
| 1     | 55 кг  | 270       |
| 2     | 85 кг  | 490       |
| 3     | 120 кг | 640       |
| 4     | 130 кг | 660       |
| 5     | 95 кг  | 620       |
| 6     | 95 кг  | 610       |
| 7     | 100 кг | 640       |
| 8     | 90 кг  | 580       |
| 9     | 90 кг  | 580       |
| 10    | 100 кг | 640       |

Найденная максимально возможная стоимость предметов в рюкзаке = 640.
Набор предметов, обеспечивающий найденную максимальную стоимость: №1, №3, №6, №7 или №1, №2, №3, №4
Общий вес предметов рюкзаке = 100.
Свободное место в рюкзаке = 0.


## Задача 2

### Начальная матрица расстояний:

|       | **A** | **B** | **C** | **D** | **E** |
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** | **∞** |   15  |   16  |   17  |   18  |
| **B** |   19  | **∞** |   5   |   6   |   7   |
| **C** |   9   |   10  | **∞** |   12  |   13  |
| **D** |   13  |   14  |   15  | **∞** |   17  |
| **E** |   17  |   18  |   19  |   4   | **∞** |

### Генерация начальных особей:

*x1:*
1 → 3 → 5 → 2 → 4 → 1

*x2:*
1 → 4 → 3 → 2 → 5 → 1

### Расчёт фитнес-функции:

*Перестановка 1:*
A → C → E → B → D → A
16 + 13 + 18 + 6 + 13 = 66

*Перестановка 2:*
A → D → C → B → E → A
17 + 15 + 10 + 7 + 17 = 66

### Закодирование особей с применением альтернативной кодировки:

*Кодировка для  особи x1*

### Шаг 1:
#### Классическая кодировка: `1 3 5 2 4`
#### Возрастная перестановка: `1 2 3 4 5`
#### Номер позиции: `1 2 3 4 5`
#### Альтернативная кодировка: `1`

### Шаг 2:
#### Классическая кодировка: `3 5 2 4`
#### Возрастная перестановка: `2 3 4 5`
#### Номер позиции: `1 2 3 4`
#### Альтернативная кодировка: `1 2`

### Шаг 3:
#### Классическая кодировка: `5 2 4`
#### Возрастная перестановка: `2 4 5`
#### Номер позиции: `1 2 3`
#### Альтернативная кодировка: `1 2 3`

### Шаг 4:
#### Классическая кодировка: `2 4`
#### Возрастная перестановка: `2 4`
#### Номер позиции: `1 2`
#### Альтернативная кодировка: `1 2 3 1`

### Шаг 5:
#### Классическая кодировка: `4`
#### Возрастная перестановка: `4`
#### Номер позиции: `1`
#### Альтернативная кодировка: `1 2 3 1 1`

*Кодировка для  особи x2*

### Шаг 1:
#### Классическая кодировка: `1 4 3 2 5`
#### Возрастная перестановка: `1 2 3 4 5`
#### Номер позиции: `1 2 3 4 5`
#### Альтернативная кодировка: `1`

### Шаг 2:
#### Классическая кодировка: `4 3 2 5`
#### Возрастная перестановка: `2 3 4 5`
#### Номер позиции: `1 2 3 4`
#### Альтернативная кодировка: `1 3`

### Шаг 3:
#### Классическая кодировка: `3 2 5`
#### Возрастная перестановка: `2 3 5`
#### Номер позиции: `1 2 3`
#### Альтернативная кодировка: `1 3 2`

### Шаг 4:
#### Классическая кодировка: `2 5`
#### Возрастная перестановка: `2 5`
#### Номер позиции: `1 2`
#### Альтернативная кодировка: `1 3 2 1`

### Шаг 5:
#### Классическая кодировка: `5`
#### Возрастная перестановка: `5`
#### Номер позиции: `1`
#### Альтернативная кодировка: `1 3 2 1 1`

### Декодирование особей:

*Декодирование  альтернативного кода x1*

### Шаг 1:
#### Альтернативная кодировка: `1 2 3 1 1`
#### Индексная кодировка: `1 2 3 4 5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная кодировка: `1`

### Шаг 2:
#### Альтернативная кодировка: `2 3 1 1`
#### Индексная кодировка: `2 3 4 5`
#### Номер позиции: `1 2 3 4`
#### Натуральная кодировка: `1 3`

### Шаг 3:
#### Альтернативная кодировка: `3 1 1`
#### Индексная кодировка: `2 4 5`
#### Номер позиции: `1 2 3`
#### Натуральная кодировка: `1 3 5`

### Шаг 4:
#### Альтернативная кодировка: `1 1`
#### Индексная кодировка: `2 4`
#### Номер позиции: `1 2`
#### Натуральная кодировка: `1 3 5 2`

### Шаг 5:
#### Альтернативная кодировка: `1`
#### Индексная кодировка: `4`
#### Номер позиции: `1`
#### Натуральная кодировка: `1 3 5 2 4`

*Декодирование  альтернативного кода x2*

### Шаг 1:
#### Альтернативная кодировка: `1 3 2 1 1`
#### Индексная кодировка: `1 2 3 4 5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная  кодировка: `1`

### Шаг 2:
#### Альтернативная кодировка: `3 2 1 1`
#### Индексная кодировка: `2 3 4 5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная кодировка: `1 4`

### Шаг 3:
#### Альтернативная кодировка: `2 1 1`
#### Индексная кодировка: `2 3 5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная кодировка: `1 4 3`

### Шаг 4:
#### Альтернативная кодировка: `1 1`
#### Индексная кодировка: `2 5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная кодировка: `1 4 3 2`

### Шаг 5:
#### Альтернативная кодировка: `1`
#### Индексная кодировка: `5`
#### Номер позиции: `1 2 3 4 5`
#### Натуральная кодировка: `1 4 3 2 5`