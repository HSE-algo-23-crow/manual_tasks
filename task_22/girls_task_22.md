## Условия задачи

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|Вес|5|10|12|4|2|2|6|4|
|Стоимость|5|5|3|8|6|8|18|12|

Вместимость рюкзака – 25

Стратегия мутации - применяем точечную мутацию в случае, если потомок нежизнеспособен или фитнес-функция меньше минимальной из родительских больше чем на 20%. Также проводим мутацию, если получившаяся скрещиванием особь уже существует.

Для формирования нового поколения используется 50% лучших особей из первого поколения - гарантированно переходят во второе поколение, а также лучшие из всех остальных особей первого поколения и их потомков.

**Решение**

Общий вес предметов – 45

**Первоначальное поколение**

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x1|1|0|1|0|1|0|0|0|
|x2|1|1|1|0|0|1|0|1|
|x3|0|0|0|1|0|1|0|1|
|x4|0|0|1|1|0|0|0|1|

**Фитнес-функции**

f(x1) = 5 + 3 + 6 = 14 (вес 19)

f(x2) = 0, особь х2 считается нежизнеспособной, поскольку выбранные предметы имеют суммарный вес 33, что превышает вместимость рюкзака. Сгенерируем новую особь x2 и рассчитаем оставшиеся фитнес-функции:

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x2|0|1|0|0|0|1|1|0|

f(x2) = 5 + 8 + 18 = 31 (вес 18)

f(x3) = 8 + 8 + 12 = 28 (вес 10)

f(x4) = 3 + 8 + 12 = 23 (вес 20)

**Отбор**

В скрещивании участвует половина популяции – 2 особи. Для скрещивания выберем 2 особи – победителей турнира. Все особи имеют шанс участвовать в скрещивании, но этот шанс для каждой особи пропорционален значению фитнес-функции этой особи. 

Согласно принципу выбора победителей турнира в скрещивании будут участвовать особи х2 и х3, так как они имеют самые высокие шансы для участия в скрещивании.

**Скрещивание**

При скрещивании будем использовать одноточечный метод. 

Применим его к особям x2 и х3. Точка разрыва хромосомы выбирается произвольно, пусть разрыв будет между 3 и 4 позициями.

После обмена частями родительских хромосом получаем двух потомков х5 и х6: 

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x5|0|1|0|1|0|1|0|1|
|x6|0|0|0|0|0|1|1|0|

f(x5) = 5 + 8 + 8 + 12 = 33 (вес 20)

f(x6) = 8 + 18 = 26 (вес 8)

Потомок х5 оказался более приспособленным чем оба родителя, в то время как потомок х6 оказался приспособлен менее чем оба родителя.

**Поколение №1**

Сформируем поколение №1 – в него войдут 50% лучших особей из первоначального поколения (х2 и х3), а также 2 лучшие особи из оставшихся (х5 и х6):

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x2|0|1|0|0|0|1|1|0|
|x3|0|0|0|1|0|1|0|1|
|x5|0|1|0|1|0|1|0|1|
|x6|0|0|0|0|0|1|1|0|

**Фитнес-функции**

f(x2) = 5 + 8 + 18 = 31 (вес 18)

f(x3) = 8 + 8 + 12 = 28 (вес 10)

f(x5) = 5 + 8 + 8 + 12 = 33 (вес 20)

f(x6) = 8 + 18 = 26 (вес 8)

**Отбор**

В скрещивании участвует половина популяции – 2 особи. Для скрещивания выберем 2 особи – победителей турнира. В скрещивании будут участвовать особи х2 и х5, так как они имеют самые высокие шансы для участия в скрещивании.

**Скрещивание**

При скрещивании будем использовать одноточечный метод. 

Применим его к особям x2 и х5. Пусть точка разрыва будет между 6 и 7 позициями.

После обмена частями родительских хромосом получаем двух потомков х7 и х8:  

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х7|0|1|0|0|0|1|0|1|
|х8|0|1|0|1|0|1|1|0|

f(x7) = 5 + 8 + 12 = 25 (вес 16)

f(x8) = 5 + 8 + 8 + 18 = 39 (вес 22)

Потомок х8 оказался более приспособленным чем оба родителя, в то время как потомок х7 оказался приспособлен менее чем оба родителя.

**Поколение №2**

Сформируем поколение №2 – в него войдут 50% лучших особей из поколения №1 (х2 и х5), а также 2 лучшие особи из оставшихся (х3 и х8):

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x2|0|1|0|0|0|1|1|0|
|x3|0|0|0|1|0|1|0|1|
|x5|0|1|0|1|0|1|0|1|
|х8|0|1|0|1|0|1|1|0|

**Фитнес-функции**

f(x2) = 5 + 8 + 18 = 31 (вес 18)

f(x3) = 8 + 8 + 12 = 28 (вес 10)

f(x5) = 5 + 8 + 8 + 12 = 33 (вес 20)

f(x8) = 5+ 8 + 8 + 18 = 39 (вес 22)

**Отбор**

В скрещивании участвует половина популяции – 2 особи. Для скрещивания выберем 2 особи – победителей турнира. В скрещивании будут участвовать особи х5 и х8, так как они имеют самые высокие шансы для участия в скрещивании.

**Скрещивание**

При скрещивании будем использовать одноточечный метод. 

Применим его к особям x5 и х8. Пусть точка разрыва будет между 5 и 6 позициями.

После обмена частями родительских хромосом получаем двух потомков х9 и х10:  

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х9|0|1|0|1|0|1|1|0|
|х10|0|1|0|1|0|1|0|1|

Обе получившиеся при скрещивании особи уже существуют. Применим операцию точечной мутации (инверсия одного разряда) для особи х9 – инвертируем случайный разряд, например, разряд 6 и получаем новую особь х9:

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х9|0|1|0|1|0|0|1|0|

f(x9) = 5 + 8 + 18 = 31 (вес 20)

Заметим, что мутация потомка х9 привела к его ослаблению.

Применим операцию точечной мутации для особи х8 – инвертируем случайный разряд, например, разряд 5 и получаем новую особь х10:

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х10|0|1|0|1|1|1|0|1|

f(x10) = 5 + 8 + 6 + 8 + 12 = 39 (вес 22)

Потомок х10 оказался таким же приспособленным как сильнейший из родителей, в то время как потомок х9 оказался приспособлен менее чем оба родителя.


**Поколение №3**

Сформируем поколение №3 – в него войдут 50% лучших особей из поколения №2 (х5 и х8), а также 2 лучшие особи из оставшихся (х9 и х10):

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x5|0|1|0|1|0|1|0|1|
|х8|0|1|0|1|0|1|1|0|
|х9|0|1|0|1|0|0|1|0|
|х10|0|1|0|1|1|1|0|1|

**Фитнес-функции**

f(x5) = 5 + 8 + 8 + 12 = 33 (вес 20)

f(x8) = 5+ 8 + 8 + 18 = 39 (вес 22)

f(x9) = 5 + 8 + 18 = 31 (вес 20)

f(x10) = 5 + 8 + 6 + 8 + 12 = 39 (вес 22)

**Отбор**

В скрещивании участвует половина популяции – 2 особи. Для скрещивания выберем 2 особи – победителей турнира. В скрещивании будут участвовать особи х8 и х10, так как они имеют самые высокие шансы для участия в скрещивании.

**Скрещивание**

При скрещивании будем использовать одноточечный метод. 

Применим его к особям x8 и х10. Пусть точка разрыва будет между 5 и 6 позициями.

После обмена частями родительских хромосом получаем двух потомков х11 и х12:  

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х11|0|1|0|1|0|1|0|1|
|х12|0|1|0|1|1|1|1|0|

Получившаяся при скрещивании особь х11 уже существует. Применим операцию точечной мутации (инверсия одного разряда) для особи х11 – инвертируем случайный разряд, например, разряд 8 и получаем новую особь х11:

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|х11|0|1|0|1|0|1|0|0|

f(x11) = 5 + 8 + 8 = 21 (вес 16)

f(x12) = 5 + 8 + 6 + 8 + 18 = 45 (вес 24)

В результате скрещивания и мутации потомок х11 оказался слабее обоих родителей, а потомок х12 оказался приспособлен более чем оба родителя.

**Поколение №4**

Сформируем поколение №4 – в него войдут 50% лучших особей из поколения №3 (х8 и х10), а также 2 лучшие особи из оставшихся (х12 и х5):

|**Предметы**|**A**|**B**|**C**|**D**|**E**|**F**|**G**|**H**|
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|x5|0|1|0|1|0|1|0|1|
|х8|0|1|0|1|0|1|1|0|
|Х10|0|1|0|1|1|1|0|1|
|х12|0|1|0|1|1|1|1|0|

**Фитнес-функции**

f(x5) = 5 + 8 + 8 + 12 = 33 (вес 20)

f(x8) = 5+ 8 + 8 + 18 = 39 (вес 22)

f(x10) = 5 + 8 + 6 + 8 + 12 = 39 (вес 22)

f(x12) = 5 + 8 + 6 + 8 + 18 = 45 (вес 24)


**Конец ГА**

Очевидно, что при дальнейшем скрещивании лидеры не поменяются (х8/х10, х12), следовательно, алгоритм прекратится. Х12 - самая жизнеспособная особь, которая подразумевает, что в рюкзак нужно взять предметы - BDEFG с весом 24 и стоимостью 45. Пустое место в рюкзаке - 1.

**Часть 2**

**Матрица расстояний**

||**1**|**2**|**3**|**4**|**5**|
| :-: | :-: | :-: | :-: | :-: | :-: |
|**1**|¥|5|5|10|6|
|**2**|6|¥|9|13|8|
|**3**|3|4|¥|2|10|
|**4**|6|8|4|¥|5|
|**5**|7|10|15|8|¥|

Сформируем две особи, содержащие в себе натуральные коды (случайные перестановки номеров городов, которые обязательно начинаются с единицы):

**Поколение №1**

|Особи|Натуральный код|
| :- | :- |
|х1|15432|
|х2|12543|

**Фитнес-функции**

f(x1) = 6 + 8 + 4 + 4 + 6 = 28

f(x2) = 5 + 8 + 8 + 4 + 3 = 28

**Кодирование**

Преобразуем натуральные коды этих особей в альтернативные:

|**х1**||||||
| :-: | :- | :- | :- | :- | :- |
|Натуральный код|1|5|4|3|2|
|Возрастающая перестановка|1|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|5|

Альтернативный код: 1

|**х1**|||||
| :-: | :- | :- | :- | :- |
|Натуральный код|5|4|3|2|
|Возрастающая перестановка|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|

Альтернативный код: 14

|**х1**||||
| :-: | :- | :- | :- |
|Натуральный код|4|3|2|
|Возрастающая перестановка|2|3|4|
|Номера возрастающей перестановки|1|2|3|

Альтернативный код: 143

|**х1**|||
| :-: | :- | :- |
|Натуральный код|3|2|
|Возрастающая перестановка|2|3|
|Номера возрастающей перестановки|1|2|

Альтернативный код: 1432

|**х1**||
| :-: | :- |
|Натуральный код|2|
|Возрастающая перестановка|2|
|Номера возрастающей перестановки|1|

**Альтернативный код: 14321**

Выполним те же действия для особи х2:

|**х2**||||||
| :-: | :- | :- | :- | :- | :- |
|Натуральный код|1|2|5|4|3|
|Возрастающая перестановка|1|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|5|

Альтернативный код: 1

|**х2**|||||
| :-: | :- | :- | :- | :- |
|Натуральный код|2|5|4|3|
|Возрастающая перестановка|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|

Альтернативный код: 11

|**х2**||||
| :-: | :- | :- | :- |
|Натуральный код|5|4|3|
|Возрастающая перестановка|3|4|5|
|Номера возрастающей перестановки|1|2|3|

Альтернативный код: 113

|**х2**|||
| :-: | :- | :- |
|Натуральный код|4|3|
|Возрастающая перестановка|3|4|
|Номера возрастающей перестановки|1|2|

Альтернативный код: 1132

|**х2**||
| :-: | :- |
|Натуральный код|3|
|Возрастающая перестановка|3|
|Номера возрастающей перестановки|1|

**Альтернативный код: 11321**

**Декодирование**

Восстановим натуральные коды особей х1 и х2 на основе альтернативного:

|**х1**||||||
| :-: | :- | :- | :- | :- | :- |
|Альтернативный код|1|4|3|2|1|
|Возрастающая перестановка|1|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|5|

Натуральный код: 1

|**х1**|||||
| :-: | :- | :- | :- | :- |
|Альтернативный код|4|3|2|1|
|Возрастающая перестановка|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|

Натуральный код: 15

|**х1**||||
| :-: | :- | :- | :- |
|Альтернативный код|3|2|1|
|Возрастающая перестановка|2|3|4|
|Номера возрастающей перестановки|1|2|3|

Натуральный код: 154


|**х1**|||
| :-: | :- | :- |
|Альтернативный код|2|1|
|Возрастающая перестановка|2|3|
|Номера возрастающей перестановки|1|2|

Натуральный код: 1543

|**х1**||
| :-: | :- |
|Альтернативный код|1|
|Возрастающая перестановка|2|
|Номера возрастающей перестановки|1|

**Натуральный код: 15432**

Восстановим натуральный код для особи х2:

|**х1**||||||
| :-: | :- | :- | :- | :- | :- |
|Альтернативный код|1|1|3|2|1|
|Возрастающая перестановка|1|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|5|

Натуральный код: 1

|**х1**|||||
| :-: | :- | :- | :- | :- |
|Альтернативный код|1|3|2|1|
|Возрастающая перестановка|2|3|4|5|
|Номера возрастающей перестановки|1|2|3|4|

Натуральный код: 12



|**х1**||||
| :-: | :- | :- | :- |
|Альтернативный код|3|2|1|
|Возрастающая перестановка|3|4|5|
|Номера возрастающей перестановки|1|2|3|

Натуральный код: 125

|**х1**|||
| :-: | :- | :- |
|Альтернативный код|2|1|
|Возрастающая перестановка|3|4|
|Номера возрастающей перестановки|1|2|

Натуральный код: 1254

|**х1**||
| :-: | :- |
|Альтернативный код|1|
|Возрастающая перестановка|3|
|Номера возрастающей перестановки|1|

**Натуральный код: 12543**





