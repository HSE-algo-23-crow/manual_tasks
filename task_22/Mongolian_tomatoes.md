# Задача коммивояжера (Travelling salesman problem)

## Постановка задачи
Имеется N городов, связанных дорогами. Расстояния между городами известны. Коммивояжер (бродячий торговец) должен выйти из первого города, посетить по одному разу в 
некотором порядке города 2,3..n и вернуться в первый город. В каком порядке следует посещать города, чтобы замкнутый путь коммивояжера имел кратчайшее расстояние?

### Вариант 6:

Решить задачу коммивояжера с применением генетического алгоритма, с учетом следующих требований:
   - Придумать условия задачи с количеством городов не менее 8.
   - Численность популяции не менее 4 особей, в скрещивании участвует половина популяции. 
   - Для скрещивания выбираются сильнейшие особи, скрещивание – одноточечное.
   - До выполнения алгоритма сформулировать стратегию применения оператора мутации.
   - Для скрещивания и мутации использовать альтернативную кодировку особей.
   - Для альтернативной кодировки отобранных особей и декодировки полученных потомков оформить подробные пошаговые комментарии.
   - Сформировать не менее 3 поколений, не считая первоначального.

## Условия задачи
Матрица расстояний: 

|       | **1** | **2** | **3** | **4** | **5** | **6** | **7** | **8** |
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|-------|-------|-------|
| **1** | **∞** |   3   |   7   |   4   |   12   | 7    | 6     | 23    |
| **2** |   12  | **∞** |   5   |  4    |   6   | 8     | 6     | 24    |
| **3** |   1   |   3   | **∞** |   4   |  12   | 23    | 6     | 5     |
| **4** |  11   |   33  |   45  | **∞** |   9   | 7     | 6     | 24    |
| **5** |   133 |  13   |   5   |   4   | **∞** | 7     | 4     | 81    | 
| **6** |   1   |   31  |  25   |   5   |   24  | **∞** | 86    | 24    |
| **7** |   41  |   3   |   5   |   4   |   2   | 78    | **∞** | 3     |
| **8** |   5   |   12  |  5    |   44  |   22  |  7    | 6     | **∞** |

##### Стратегия применения мутации:
Мутация применяется, если: 
1) мутация происходит в 50% случаев;
2) хромосомы новых особей идентичны родительским.

### Начальная популяция:
Сформируем начальную популяцию (N=4). Для этого случайным образом составим замкнутые маршруты, начинающиеся в вершине 1.

|        | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
|--------|---|---|---|---|---|---|---|---|
| **x1** | 1 | 3 | 5 | 6 | 8 | 7 | 2 | 4 |
| **x2** | 1 | 5 | 3 | 2 | 4 | 6 | 8 | 7 |
| **x3** | 1 | 8 | 7 | 2 | 3 | 5 | 4 | 6 |
| **x4** | 1 | 7 | 2 | 8 | 3 | 6 | 4 | 2 |

### Отбор особей начальной популяции для скрещивания:
Вычислим степень приспособленности (фитнес-функцию) всех особей в популяции. Фитнес-функция - длина маршрута, задаваемого особью.
Суммируем значения из матрицы на пересечении городов.

| Особь  | f(x)  |
|--------|-------|
| **x1** | 74    |
| **x2** | 102   |
| **x3** | 51    |
| **x4** | 208   |

#### Элитарный способ скрещивания: берем две самые сильные особи.

Таким образом, особи x1 (74) и x3(61) будут участвовать в скрещивании.

### Скрещивание особей начальной популяции:

#### Альтернативное кодирование:

| **x1** | 1 | 3 | 5 | 6 | 8 | 7 | 2 | 4 |
|--------|---|---|---|---|---|---|---|---|
| **x3** | 1 | 8 | 7 | 2 | 3 | 5 | 4 | 6 |

Перед скрещиванием особей применим альтернативную кодировку. Альтернативный код особи получается из ее натурального кода.

Составим таблицу для кодирования. В первой строке будет располагаться натуральный код особи, во второй - возрастающая перестановка от 1 до 8, а в третьей - номера позиций в этой перестановке, всегда начинающиеся с единицы.

| **x1** | 1 | 3 | 5 | 6 | 8 | 7 | 2 | 4 |
|--------|---|---|---|---|---|---|---|---|
| **N**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |

Альтернативный код получается в результате прохода по элементам кода особи, поиска текущего элемента в возрастающей последовательности и его сопоставления с позицией.
В данном случае первый элемент кода особи равен 1, в возрастающей последовательности находится на 1 месте и соответствует позиции 1.

Запишем эту единицу, а также удалим ее сначала из первой строки, а затем из второй. 3 строку с позициями перенумеруем. Получившаяся таблица:

| **x1** | 3 | 5 | 6 | 8 | 7 | 2 | 4 |
|--------|---|---|---|---|---|---|---|
| **N**  | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Следующий на очереди элемент - 4. Найдем его в возрастающей последовательности. Он находится на 3 месте и соответствует позиции 3.

Запишем 3 и удалим этот элемент из 1 и 2 строки, а также произведем повторную нумерацию 3 строки.

| **x1** | 5 | 3 | 2 | 9 | 7 | 8 | 6 |
|--------|---|---|---|---|---|---|---|
| **N**  | 2 | 3 | 5 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 |

Следующий элемент для перевода в альтернативный код - 5. Найдем его в возрастающей последовательности и сопоставим с позицией. Получилось число 3.

Проделаем аналогичные операции с таблицей и получим новую:

| **x1** | 3 | 2 | 9 | 7 | 8 | 6 |
|--------|---|---|---|---|---|---|
| **N**  | 2 | 3 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 |

Далее все аналогично. Число 3 соответствует позиции 2. Запишем 2 и продолжим.

| **x1** | 2 | 9 | 7 | 8 | 6 |
|--------|---|---|---|---|---|
| **N**  | 2 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 |

Число 2 соответствует 1 позиции. Запишем 1.

| **x1** | 9 | 7 | 8 | 6 |
|--------|---|---|---|---|
| **N**  | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 

Число 9 соответствует 4 позиции. Запишем 4.

| **x1** | 7 | 8 | 6 |
|--------|---|---|---|
| **N**  | 6 | 7 | 8 |
| **№**  | 1 | 2 | 3 |

Число 7 соответствует 2 позиции. Запишем 2.

| **x1** | 8 | 6 |
|--------|---|---|
| **N**  | 6 | 8 |
| **№**  | 1 | 2 |

Число 8 соответствует 2 позиции. Запишем 2.

| **x1** | 6 |
|--------|---|
| **N**  | 6 |
| **№**  | 1 |

И оставшееся число соответствует позиции 1. Позиция последнего числа всегда равна единице.

Получившийся альтернативный код особи x1: 133214221

#### Альтернативная кодировка особи x3:

Составим таблицу для особи x3:

| **x2** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 |
|--------|---|---|---|---|---|---|---|---|---|
| **N**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |

| **x2** | 4 | 9 |
|--------|---|---|
| **N**  | 4 | 9 |
| **№**  | 1 | 2 |

После проведения аналогичных операций получим альтернативный код особи x3: 174241211

#### Скрещивание: 
Применим одноточечное скрещивание к особям.

| **x1** | 1 | 3 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|---|---|---|---|
| **x3** | 1 | 7 | 4 | 2 | 4 | 1 | 2 | 1 | 1 |
-----------------------------------------------------------------
Разделим х1 и х3 пополам. Для первого потомка: первая половина - х1, а вторая половина - х2. Для второго потомка: первая половина - х2, а вторая половина - х1.

|--------|---|---|---|---|---|---|---|---|
| **x5** | 1 | 2 | 3 | 3 | 1 | 2 | 1 | 1 |
| **x6** | 1 | 7 | 6 | 1 | 4 | 3 | 1 | 1 |

Теперь декодируем получившиеся последовательности:

Перевод из альтернативной кодировки в нормальную осуществляется практически аналогично. Сначала составляется таблица:

| **x5** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|---|---|---|---|
| **N**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |

Но в отличие от кодировки теперь ищется позиция и сопоставляется с элементом в возрастающей последовательности. 
В данном случае с единицей все предельно понятно.

По аналогии удалим столбец с единицей и перейдем к следующему элементу - 7:

| **x5** | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|---|---|---|
| **N**  | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |

Найдем число 7 в последовательности позиций. Элементу 7 соответствует число 8 в возрастающей последовательности. Запишем 8 и продолжим.

Удалим число 7 из первой строки, число 8 из возрастающей последовательности и число 7 из последовательности с позициями и получим таблицу: 
---------------------------------------------------- ниже не правила
| **x5** | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|---|---|
| **N**  | 2 | 3 | 4 | 5 | 6 | 7 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 | 7 |

Числу 3 соответствует элемент 4.

| **x5** | 2 | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|---|
| **N**  | 2 | 3 | 5 | 6 | 7 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 6 |

Числу 2 соответствует элемент 3.

| **x5** | 1 | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|---|
| **N**  | 2 | 5 | 6 | 7 | 9 |
| **№**  | 1 | 2 | 3 | 4 | 5 | 

Числу 1 соответствует элемент 2.

| **x5** | 4 | 2 | 2 | 1 |
|--------|---|---|---|---|
| **N**  | 5 | 6 | 7 | 9 |
| **№**  | 1 | 2 | 3 | 4 |

Числу 4 соответствует элемент 9.

| **x5** | 2 | 2 | 1 |
|--------|---|---|---|
| **N**  | 5 | 6 | 7 |
| **№**  | 1 | 2 | 3 |

Числу 2 соответствует элемент 6.

| **x5** | 2 | 1 |
|--------|---|---|
| **N**  | 5 | 7 |
| **№**  | 1 | 2 |

Числу 2 соответствует элемент 7.

| **x5** | 1   |
|--------|-----|
| **N**  | 5   |
| **№**  | 1   |

И, наконец, оставшейся единице соответствует число 5.

Получившийся натуральный код особи x5: 184329675
Натуральный код особи x6 после проведения аналогичной операции: 146382759

| **x5** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 |
|--------|---|---|---|---|---|---|---|---|---|
| **x6** | 1 | 4 | 6 | 3 | 8 | 2 | 7 | 5 | 9 |

#### Вычислим фитнес-функцию новых особей (посчитаем длину маршрута):

| Особь  | f(x)                     |
|--------|--------------------------|
| **x5** | 3+5+1+7+2+2+9+4+6 = 39   |
| **x6** | 9+2+10+5+2+8+4+9+15 = 64 |

Новое поколение будет состоять из особей, отобранных турнирным методом для скрещивания, и их потомков.

### I поколение

|        | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | f(x) |
|--------|---|---|---|---|---|---|---|---|---|------|
| **x1** | 1 | 4 | 5 | 3 | 2 | 9 | 7 | 8 | 6 | 51   |
| **x2** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 | 42   |
| **x5** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 | 39   |
| **x6** | 1 | 4 | 6 | 3 | 8 | 2 | 7 | 5 | 9 | 64   |

#### Стратегия применения: фитнес-функция новой особи превышает 64 (максимальное значение фитнес-функции в текущей популяции).

### Отбор родительских особей I поколения:

Турнирным методом отберем особей для скрещивания. Распределим их случайным образом на пары и выберем победителей.
 
| Пара 1 | f(x) |    
|--------|------|
| **x1** | 51   | 
| **x2** | 42   |
Победитель: x2
 
| Пара 2 | f(x) |    
|--------|------|
| **x5** | 39   |
| **x6** | 64   |
Победитель: x5

Особи x2 и x5 будут участвовать в скрещивании.

### Скрещивание особей I поколения:

Натуральная кодировка: 

| **x2** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 |
|--------|---|---|---|---|---|---|---|---|---|
| **x5** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 |

Перед скрещиванием применим альтернативную кодировку:

| **x2** | 1 | 7 | 4 | 2 | 4 | 1 | 2 | 1 | 1 |
|--------|---|---|---|---|---|---|---|---|---|
| **x5** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |

Применим равномерное скрещивание к особям. Сгенерируем случайную бинарную последовательность для отбора хромосом родителей: 010010110

|        | 0 | 1 | 0 | 0 | 1 | 0 | 1 | 1 | 0 |
|--------|---|---|---|---|---|---|---|---|---|
| **x7** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 1 | 1 |
| **x8** | 1 | 7 | 4 | 2 | 1 | 1 | 2 | 2 | 1 |

Декодируем получившиеся хромосомы:

| **x7** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 2 | 6 |
|--------|---|---|---|---|---|---|---|---|---|
| **x8** | 1 | 8 | 5 | 3 | 2 | 4 | 7 | 9 | 6 |

Вычислим фитнес-функции:

| Особь  | f(x)                    |
|--------|-------------------------|
| **x7** | 3+5+1+4+8+1+11+3+8 = 44 |
| **x8** | 3+6+7+7+16+3+8+2+8 = 60 |

Получившиеся значения не превышают 61, а значит мутация не будет применена. 

Новое II поколение будет состоять из особей, отобранных турнирным методом, и их потомков.


### II поколение

|        | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | f(x) |
|--------|---|---|---|---|---|---|---|---|---|------|
| **x2** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 | 42   |
| **x5** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 | 39   |
| **x7** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 2 | 6 | 44   |
| **x8** | 1 | 8 | 5 | 3 | 2 | 4 | 7 | 9 | 6 | 60   |

#### Стратегия применения: фитнес-функция новой особи превышает 60 (максимальное значение фитнес-функции в текущей популяции).

### Отбор родительских особей II поколения:

Турнирным методом отберем особей для скрещивания. Распределим их случайным образом на пары и выберем победителей.
 
| Пара 1 | f(x) |    
|--------|------|
| **x2** | 42   | 
| **x7** | 44   |
Победитель: x2
 
| Пара 2 | f(x) |    
|--------|------|
| **x5** | 39   |
| **x8** | 60   |
Победитель: x5

Особи x2 и x5 вновь будут участвовать в скрещивании.

### Скрещивание особей II поколения:

Натуральная кодировка: 

| **x2** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 |
|--------|---|---|---|---|---|---|---|---|---|
| **x5** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 |

Перед скрещиванием применим альтернативную кодировку:

| **x2** | 1 | 7 | 4 | 2 | 4 | 1 | 2 | 1 | 1 |
|--------|---|---|---|---|---|---|---|---|---|
| **x5** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |

Применим равномерное скрещивание к особям. Сгенерируем случайную бинарную последовательность для отбора хромосом родителей: 001001010

|         | 0 | 0 | 1 | 0 | 0 | 1 | 0 | 1 | 0 |
|---------|---|---|---|---|---|---|---|---|---|
| **x9**  | 1 | 7 | 4 | 2 | 1 | 1 | 2 | 1 | 1 |
| **x10** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |

Декодируем получившиеся хромосомы:

| **x9**  | 1 | 8 | 5 | 3 | 2 | 4 | 7 | 6 | 9 |
|---------|---|---|---|---|---|---|---|---|---|
| **x10** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 |

Вычислим фитнес-функции:

| Особь   | f(x)                      |
|---------|---------------------------|
| **x9**  | 3+6+7+7+16+3+4+17+15 = 78 |
| **x10** | 3+5+1+4+8+1+4+4+1 = 31    |

Получившаяся фитнес-функция потомка x9 превышает предельное значение 60. Это значит, что нужно применить мутацию.

### Мутация потомка II поколения:

Для проведения мутации вернемся к альтернативной кодировке потомка x9:

| **x9** | 1 | 7 | 4 | 2 | 1 | 1 | 2 | 1 | 1 |
|--------|---|---|---|---|---|---|---|---|---|
| **№**  | 1 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 |
| **M**  | 1 | 7 | 4 | 2 | 4 | 1 | 2 | 2 | 1 |

В нижней строке представлены максимальные допустимые числа для замены. Вычисляются по формуле: n-i+1.

В 3 строке представлена хромосома после мутации. Декодируем её и вычислим фитнес-функцию:

| **M**  | 1 | 7 | 4 | 2 | 4 | 1 | 2 | 2 | 1 | f(x)                     |
|--------|---|---|---|---|---|---|---|---|---|--------------------------|
| **x9** | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 9 | 4 | 3+6+7+4+1+3+17+1+13 = 55 |

Мутация проведена успешно! Значение фитнес-функции уменьшилось.

Новое III поколение будет состоять из особей, отобранных турнирным методом, и их потомков.


### III поколение

|          | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | f(x) |
|----------|---|---|---|---|---|---|---|---|---|------|
| **x2**   | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 4 | 9 | 42   |
| **x5**   | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 | 39   |
| **x9**   | 1 | 8 | 5 | 3 | 7 | 2 | 6 | 9 | 4 | 55   |
| **x10**  | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 | 31   |

#### Стратегия применения: фитнес-функция новой особи превышает 55 (максимальное значение фитнес-функции в текущей популяции).

### Отбор родительских особей III поколения:

Турнирным методом отберем особей для скрещивания. Распределим их случайным образом на пары и выберем победителей.
 
| Пара 1 | f(x) |    
|--------|------|
| **x2** | 42   | 
| **x5** | 39   |
Победитель: x5
 
| Пара 2  | f(x) |    
|---------|------|
| **x9**  | 55   |
| **x10** | 31   |
Победитель: x10

Особи x5 и x10 будут участвовать в скрещивании.

### Скрещивание особей III поколения:

Натуральная кодировка: 

| **x5**  | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 |
|---------|---|---|---|---|---|---|---|---|---|
| **x10** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 |

Перед скрещиванием применим альтернативную кодировку:

| **x5**  | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|---------|---|---|---|---|---|---|---|---|---|
| **x10** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |

Применим равномерное скрещивание к особям. В данном случае хромосомы получились практически идентичными, мы можем внести изменение только в одном месте: 000010000

|         | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 |
|---------|---|---|---|---|---|---|---|---|---|
| **x11** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |
| **x12** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |

Хромосомы потомков получились идентичными родительским. Применяем мутацию для двух потомков.
### Мутация потомков III поколения:

Применим мутацию в позиции 2:

| **x11** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |
|---------|---|---|---|---|---|---|---|---|---|
| **№**   | 1 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 |
| **M**   | 1 | 5 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |

Применим мутацию в позиции 7:

| **x12** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |
|---------|---|---|---|---|---|---|---|---|---|
| **№**   | 1 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 |
| **M**   | 1 | 7 | 3 | 2 | 1 | 4 | 1 | 2 | 1 |

Декодируем получившиеся хромосомы:

| **x11** | 1 | 6 | 4 | 3 | 8 | 9 | 5 | 7 | 2 |
|---------|---|---|---|---|---|---|---|---|---|
| **x12** | 1 | 8 | 4 | 3 | 2 | 9 | 5 | 7 | 6 |

Вычислим фитнес-функцию:

| Особь   | f(x)                     |
|---------|--------------------------|
| **x11** | 11+2+1+5+15+1+5+1+1 = 42 |
| **x12** | 3+5+1+7+2+1+5+4+8 = 36   |

Фитнес-функции не превышают предельное значение, а значит мутация больше не будет применена.

Новое IV поколение будет состоять из особей, отобранных турнирным методом, и их потомков.


### IV поколение

|         | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | f(x) |
|---------|---|---|---|---|---|---|---|---|---|------|
| **x5**  | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 | 39   |
| **x10** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 | 31   |
| **x11** | 1 | 6 | 4 | 3 | 8 | 9 | 5 | 7 | 2 | 42   |
| **x12** | 1 | 8 | 4 | 3 | 2 | 9 | 5 | 7 | 6 | 36   |

#### Стратегия применения: фитнес-функция новой особи превышает 42 (максимальное значение фитнес-функции в текущей популяции).

### Отбор родительских особей IV поколения:

Турнирным методом отберем особей для скрещивания. Распределим их случайным образом на пары и выберем победителей.
 
| Пара 1  | f(x) |    
|---------|------|
| **x11** | 42   | 
| **x12** | 36   |
Победитель: x12
 
| Пара 2  | f(x) |    
|---------|------|
| **x10** | 31   |
| **x5**  | 39   |
Победитель: x10

Особи x10 и x12 будут участвовать в скрещивании.

### Скрещивание особей IV поколения:

Натуральная кодировка: 

| **x10** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 |
|---------|---|---|---|---|---|---|---|---|---|
| **x12** | 1 | 8 | 4 | 3 | 2 | 9 | 5 | 7 | 6 |

Перед скрещиванием применим альтернативную кодировку:

| **x10** | 1 | 7 | 3 | 2 | 4 | 4 | 2 | 2 | 1 |
|---------|---|---|---|---|---|---|---|---|---|
| **x12** | 1 | 7 | 3 | 2 | 1 | 4 | 1 | 2 | 1 |

Применим равномерное скрещивание к особям. Сгенерируем случайную бинарную последовательность для отбора хромосом родителей: 011100100

|         | 0 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | 0 |
|---------|---|---|---|---|---|---|---|---|---|
| **x13** | 1 | 7 | 3 | 2 | 4 | 4 | 1 | 2 | 1 |
| **x14** | 1 | 7 | 3 | 2 | 1 | 4 | 2 | 2 | 1 |

Декодируем получившиеся хромосомы:

| **x13** | 1 | 8 | 4 | 3 | 7 | 9 | 2 | 6 | 5 |
|---------|---|---|---|---|---|---|---|---|---|
| **x14** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 |

Вычислим фитнес-функции:

| Особь   | f(x)                   |
|---------|------------------------|
| **x13** | 3+5+1+4+8+6+3+5+6 = 41 |
| **x14** | 3+5+1+7+2+2+9+4+6 = 39 |

Оба значения получились меньше предельного, а значит мутация не будет применена.

Следующее поколение будет состоять из потомков и их родителей.


|         | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | f(x) |
|---------|---|---|---|---|---|---|---|---|---|------|
| **x10** | 1 | 8 | 4 | 3 | 7 | 9 | 5 | 6 | 2 | 31   |
| **x12** | 1 | 8 | 4 | 3 | 2 | 9 | 5 | 7 | 6 | 36   |
| **x13** | 1 | 8 | 4 | 3 | 7 | 9 | 2 | 6 | 5 | 41   |
| **x14** | 1 | 8 | 4 | 3 | 2 | 9 | 6 | 7 | 5 | 39   |

Лидер популяции - особь x10.


### ОТВЕТ:
##### Найденный маршрут: 1-8-4-3-7-9-5-6-2-1
#### Длина маршрута: 31

### Правильный ответ:
##### Маршрут: 1-5-6-4-9-3-7-8-2-1
#### Длина маршрута: 20 (1+4+2+1+2+4+3+2+1)


Погрешность составила: $\frac{31-20}{20}$ * 100 = 55% 

Погрешность, если бы было сформировано только первое поколение: $\frac{39-20}{20}$ * 100 = 95%
